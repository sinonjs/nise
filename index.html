<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="None">
  
  
  <link rel="shortcut icon" href="img/favicon.ico">
  <title>nise</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="css/theme.css" />
  <link rel="stylesheet" href="css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "nise (\u507d)";
    var mkdocs_page_input_path = "index.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="js/jquery-2.1.1.min.js" defer></script>
  <script src="js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="." class="icon icon-home"> nise</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href=".">nise (偽)</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#fake-xmlhttprequest">Fake XMLHttpRequest</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#usefakexmlhttprequest">useFakeXMLHttpRequest</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#var-xhr-fakexhrusefakexmlhttprequest">var xhr = fakeXhr.useFakeXMLHttpRequest();</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#xhroncreate-function-xhr">xhr.onCreate = function (xhr) {};</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#xhrrestore">xhr.restore();</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fakexmlhttprequest">FakeXMLHttpRequest</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#string-requesturl">String request.url</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#string-requestmethod">String request.method</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#object-requestrequestheaders">Object request.requestHeaders</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#string-requestrequestbody">String request.requestBody</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#int-requeststatus">int request.status</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#string-requeststatustext">String request.statusText</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#boolean-requestasync">boolean request.async</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#string-requestusername">String request.username</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#string-requestpassword">String request.password</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#document-requestresponsexml">Document request.responseXML</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#string-requestgetresponseheaderheader">String request.getResponseHeader(header);</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#object-requestgetallresponseheaders">Object request.getAllResponseHeaders();</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#filtered-requests">Filtered requests</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#fakexmlhttprequestusefilters">FakeXMLHttpRequest.useFilters</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#fakexmlhttprequestaddfilterfn">FakeXMLHttpRequest.addFilter(fn)</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#simulating-server-responses">Simulating server responses</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#requestsetstatusstatus">request.setStatus(status);</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#requestsetresponseheadersobject">request.setResponseHeaders(object);</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#requestsetresponsebodybody">request.setResponseBody(body);</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#requestrespondstatus-headers-body">request.respond(status, headers, body);</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#requesterror">request.error();</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#boolean-requestautorespond">Boolean request.autoRespond</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#number-requestautorespondafter">Number request.autoRespondAfter</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fake-server">Fake server</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#var-server-fakeservercreateconfig">var server = fakeServer.create([config]);</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#var-server-fakeserverwithclockcreate">var server = fakeServerWithClock.create();</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#serverconfigureconfig">server.configure(config);</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#serverrespondwithresponse">server.respondWith(response);</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#serverrespondwithurl-response">server.respondWith(url, response);</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#serverrespondwithmethod-url-response">server.respondWith(method, url, response);</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#serverrespondwithurlregexp-response">server.respondWith(urlRegExp, response);</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#serverrespondwithmethod-urlregexp-response">server.respondWith(method, urlRegExp, response);</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#serverrespond">server.respond();</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#serverautorespond-true">server.autoRespond = true;</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#serverautorespondafter-ms">server.autoRespondAfter = ms;</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#serverrespondimmediately-true">server.respondImmediately = true;</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#array-serverrequests">array server.requests</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#boolean-serverfakehttpmethods">Boolean server.fakeHTTPMethods</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#servergethttpmethodrequest">server.getHTTPMethod(request)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#serverrestore">server.restore();</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fake-server-options">Fake server options</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#boolean-autorespond">Boolean autoRespond</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#number-autorespondafter-ms">Number autoRespondAfter (ms)</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#boolean-respondimmediately">Boolean respondImmediately</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#boolean-fakehttpmethods">boolean fakeHTTPMethods</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    </ul>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href=".">nise</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".">Docs</a> &raquo;</li>
    
      
    
    <li>nise (偽)</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/sinonjs/nise/edit/master/docs/index.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="nise">nise (偽)</h1>
<p>fake XHR and Server</p>
<p>This module has been extracted from <a href="http://sinonjs.org">Sinon.JS</a> and can be used standalone. Sinon.JS will always be the "full package". However, there are use cases, where fake XHR and fake Server are needed but the rest of Sinon.JS not. That's the scenario of nise.</p>
<h2 id="fake-xmlhttprequest">Fake <code>XMLHttpRequest</code></h2>
<p>Provides a fake implementation of <code>XMLHttpRequest</code> and provides
several interfaces for manipulating objects created by it.</p>
<p>Also fakes native <code>XMLHttpRequest</code> and <code>ActiveXObject</code> (when available, and only for <code>XMLHTTP</code> progids). Helps with testing requests made with <code>XHR</code>.</p>
<pre><code class="language-js">var fakeXhr = require(&quot;nise&quot;).fakeXhr;
var sinon = require(&quot;sinon&quot;);

{
    setUp: function () {
        this.xhr = fakeXhr.useFakeXMLHttpRequest();
        var requests = this.requests = [];

        this.xhr.onCreate = function (xhr) {
            requests.push(xhr);
        };
    },

    tearDown: function () {
        this.xhr.restore();
    },

    &quot;test should fetch comments from server&quot; : function () {
        var callback = sinon.spy();
        myLib.getCommentsFor(&quot;/some/article&quot;, callback);
        assertEquals(1, this.requests.length);

        this.requests[0].respond(200, { &quot;Content-Type&quot;: &quot;application/json&quot; },
                                 '[{ &quot;id&quot;: 12, &quot;comment&quot;: &quot;Hey there&quot; }]');
        assert(callback.calledWith([{ id: 12, comment: &quot;Hey there&quot; }]));
    }
}
</code></pre>
<h3 id="usefakexmlhttprequest"><code>useFakeXMLHttpRequest</code></h3>
<h4 id="var-xhr-fakexhrusefakexmlhttprequest">var xhr = fakeXhr.useFakeXMLHttpRequest();</h4>
<p>Causes fakeXhr to replace the native <code>XMLHttpRequest</code> object in browsers that support it with a custom implementation which does not send actual requests.</p>
<p>In browsers that support <code>ActiveXObject</code>, this constructor is replaced, and fake objects are returned for <code>XMLHTTP</code> progIds. Other progIds, such as <code>XMLDOM</code> are left untouched.</p>
<p>The native <code>XMLHttpRequest</code> object will be available at <code>fakeXhr.xhr.XMLHttpRequest</code></p>
<h4 id="xhroncreate-function-xhr"><code>xhr.onCreate = function (xhr) {};</code></h4>
<p>By assigning a function to the <code>onCreate</code> property of the returned object from <code>useFakeXMLHttpRequest()</code> you can subscribe to newly created <code>FakeXMLHttpRequest</code> objects. See below for the fake xhr object API.</p>
<p>Using this observer means you can still reach objects created by e.g. <code>jQuery.ajax</code> (or other abstractions/frameworks).</p>
<h4 id="xhrrestore"><code>xhr.restore();</code></h4>
<p>Restore original function(s).</p>
<h3 id="fakexmlhttprequest"><code>FakeXMLHttpRequest</code></h3>
<h4 id="string-requesturl"><code>String request.url</code></h4>
<p>The URL set on the request object.</p>
<h4 id="string-requestmethod"><code>String request.method</code></h4>
<p>The request method as a string.</p>
<h4 id="object-requestrequestheaders"><code>Object request.requestHeaders</code></h4>
<p>An object of all request headers, i.e.:</p>
<pre><code class="language-js">{
    &quot;Accept&quot;: &quot;text/html, */*&quot;,
    &quot;Connection&quot;: &quot;keep-alive&quot;
}
</code></pre>
<h4 id="string-requestrequestbody"><code>String request.requestBody</code></h4>
<p>The request body</p>
<h4 id="int-requeststatus"><code>int request.status</code></h4>
<p>The request's status code.</p>
<p><code>undefined</code> if the request has not been handled (see <a href="#respond"><code>respond</code></a> below)</p>
<h4 id="string-requeststatustext"><code>String request.statusText</code></h4>
<p>Only populated if the <a href="#respond"><code>respond</code></a> method is called (see below).</p>
<h4 id="boolean-requestasync"><code>boolean request.async</code></h4>
<p>Whether or not the request is asynchronous.</p>
<h4 id="string-requestusername"><code>String request.username</code></h4>
<p>Username, if any.</p>
<h4 id="string-requestpassword"><code>String request.password</code></h4>
<p>Password, if any.</p>
<h4 id="document-requestresponsexml"><code>Document request.responseXML</code></h4>
<p>When using <a href="#respond"><code>respond</code></a>, this property is populated with a parsed document if response headers indicate as much (see <a href="http://www.w3.org/TR/XMLHttpRequest/">the spec</a>)</p>
<h4 id="string-requestgetresponseheaderheader"><code>String request.getResponseHeader(header);</code></h4>
<p>The value of the given response header, if the request has been responded to (see <a href="#respond"><code>respond</code></a>).</p>
<h4 id="object-requestgetallresponseheaders"><code>Object request.getAllResponseHeaders();</code></h4>
<p>All response headers as an object.</p>
<h3 id="filtered-requests">Filtered requests</h3>
<p>When using Sinon.JS for mockups or partial integration/functional testing, you might want to fake some requests, while allowing others to go through to the backend server. With filtered <code>FakeXMLHttpRequest</code>s (new in v1.3.0), you can.</p>
<h4 id="fakexmlhttprequestusefilters"><code>FakeXMLHttpRequest.useFilters</code></h4>
<p>Default <code>false</code>.</p>
<p>When set to <code>true</code>, Sinon will check added filters if certain requests should be "unfaked"</p>
<h4 id="fakexmlhttprequestaddfilterfn"><code>FakeXMLHttpRequest.addFilter(fn)</code></h4>
<p>Add a filter that will decide whether or not to fake a request.</p>
<p>The filter will be called when <code>xhr.open</code> is called, with the exact same arguments (<code>method</code>, <code>url</code>, <code>async</code>, <code>username</code>, <code>password</code>). If the filter returns <code>true</code>, the request will not be faked.</p>
<h3 id="simulating-server-responses">Simulating server responses</h3>
<h4 id="requestsetstatusstatus"><code>request.setStatus(status);</code></h4>
<p>Sets response status (<code>status</code> and <code>statusText</code> properties).</p>
<p>Status should be a number, the status text is looked up from <code>fakeXhr.FakeXMLHttpRequest.statusCodes</code>.</p>
<h4 id="requestsetresponseheadersobject"><code>request.setResponseHeaders(object);</code></h4>
<p>Sets response headers (e.g. <code>{ "Content-Type": "text/html", /* ... */ }</code>, updates the <code>readyState</code> property and fires <code>onreadystatechange</code>.</p>
<h4 id="requestsetresponsebodybody"><code>request.setResponseBody(body);</code></h4>
<p>Sets the respond body, updates the <code>readyState</code> property and fires <code>onreadystatechange</code>.</p>
<p>Additionally, populates <code>responseXML</code> with a parsed document if <a href="http://www.w3.org/TR/XMLHttpRequest/">response headers indicate as much</a>.</p>
<h4 id="requestrespondstatus-headers-body"><code>request.respond(status, headers, body);</code></h4>
<p>Calls the above three methods.</p>
<h4 id="requesterror"><code>request.error();</code></h4>
<p>Simulates a network error on the request. The <code>onerror</code> handler will be called and the <code>status</code> will be <code>0</code>.</p>
<h4 id="boolean-requestautorespond"><code>Boolean request.autoRespond</code></h4>
<p>When set to <code>true</code>, causes the server to automatically respond to incoming requests after a timeout.</p>
<p>The default timeout is 10ms but you can control it through the <code>autoRespondAfter</code> property.</p>
<p>Note that this feature is intended to help during mockup development, and is not suitable for use in tests.</p>
<h4 id="number-requestautorespondafter"><code>Number request.autoRespondAfter</code></h4>
<p>When <code>autoRespond</code> is <code>true</code>, respond to requests after this number of milliseconds. Default is 10.</p>
<h2 id="fake-server">Fake server</h2>
<p>High-level API to manipulate <code>FakeXMLHttpRequest</code> instances.</p>
<p><small>For help with handling JSON-P please refer to our <a href="#json-p">notes below</a></small></p>
<pre><code class="language-js">var fakeServer = require(&quot;nise&quot;).fakeServer;
var sinon = require(&quot;sinon&quot;);

{
    setUp: function () {
        this.server = fakeServer.create();
    },

    tearDown: function () {
        this.server.restore();
    },

    &quot;test should fetch comments from server&quot; : function () {
        this.server.respondWith(&quot;GET&quot;, &quot;/some/article/comments.json&quot;,
            [200, { &quot;Content-Type&quot;: &quot;application/json&quot; },
             '[{ &quot;id&quot;: 12, &quot;comment&quot;: &quot;Hey there&quot; }]']);

        var callback = sinon.spy();
        myLib.getCommentsFor(&quot;/some/article&quot;, callback);
        this.server.respond();

        sinon.assert.calledWith(callback, [{ id: 12, comment: &quot;Hey there&quot; }]);

        assert(server.requests.length &gt; 0)
    }
}
</code></pre>
<h4 id="var-server-fakeservercreateconfig"><code>var server = fakeServer.create([config]);</code></h4>
<p>Creates a new server.</p>
<p>This function also calls <code>useFakeXMLHttpRequest()</code>.</p>
<p><code>create</code> accepts optional properties to configure the fake server. See <a href="#options">options</a> below for configuration parameters.</p>
<h4 id="var-server-fakeserverwithclockcreate"><code>var server = fakeServerWithClock.create();</code></h4>
<p>Creates a server that also manages fake timers.</p>
<p>This is useful when testing <code>XHR</code> objects created with e.g. jQuery 1.3.x, which uses a timer to poll the object for completion, rather than the usual <code>onreadystatechange</code>.</p>
<h4 id="serverconfigureconfig"><code>server.configure(config);</code></h4>
<p>Configures the fake server.</p>
<p>See <a href="#options">options</a> below for configuration parameters.</p>
<h4 id="serverrespondwithresponse"><code>server.respondWith(response);</code></h4>
<p>Causes the server to respond to any request not matched by another response with the provided data. The default catch-all response is <code>[404, {}, ""]</code>.</p>
<p><code>response</code> can be one of three things:</p>
<ol>
<li>A <code>String</code> or <code>ArrayBuffer</code> representing the response body</li>
<li>An <code>Array</code> with status, headers and response body, e.g. <code>[200, { "Content-Type": "text/html", "Content-Length": 2 }, "OK"]</code></li>
<li>A <code>Function</code>.</li>
</ol>
<p>Default status is 200 and default headers are none.</p>
<p>When the response is a <code>Function</code>, it will be passed the request object. You
must manually call <a href="#respond">respond</a> on it to complete the
request.</p>
<h4 id="serverrespondwithurl-response"><code>server.respondWith(url, response);</code></h4>
<p>Responds to all requests to given URL, e.g. <code>/posts/1</code>.</p>
<h4 id="serverrespondwithmethod-url-response"><code>server.respondWith(method, url, response);</code></h4>
<p>Responds to all <code>method</code> requests to the given URL with the given response.</p>
<p><code>method</code> is an HTTP verb.</p>
<h4 id="serverrespondwithurlregexp-response"><code>server.respondWith(urlRegExp, response);</code></h4>
<p>URL may be a regular expression, e.g. <code>/\\/post\\//\\d+</code></p>
<p>If the response is a <code>Function</code>, it will be passed any capture groups from the regular expression along with the XMLHttpRequest object:</p>
<pre><code class="language-js">server.respondWith(/\/todo-items\/(\d+)/, function(xhr, id) {
    xhr.respond(
        200,
        { &quot;Content-Type&quot;: &quot;application/json&quot; },
        '[{ &quot;id&quot;: ' + id + &quot; }]&quot;
    );
});
</code></pre>
<h4 id="serverrespondwithmethod-urlregexp-response"><code>server.respondWith(method, urlRegExp, response);</code></h4>
<p>Responds to all <code>method</code> requests to URLs matching the regular expression.</p>
<h4 id="serverrespond"><code>server.respond();</code></h4>
<p>Causes all queued asynchronous requests to receive a response.</p>
<p>If none of the responses added through <code>respondWith</code> match, the default response is <code>[404, {}, ""]</code>.</p>
<p>Synchronous requests are responded to immediately, so make sure to call <code>respondWith</code> upfront.</p>
<p>If called with arguments, <code>respondWith</code> will be called with those arguments before responding to requests.</p>
<h4 id="serverautorespond-true"><code>server.autoRespond = true;</code></h4>
<p>If set, will automatically respond to every request after a timeout.</p>
<p>The default timeout is 10ms but you can control it through the <code>autoRespondAfter</code> property.</p>
<p>Note that this feature is intended to help during mockup development, and is not suitable for use in tests. For synchronous immediate responses, use <code>respondImmediately</code> instead.</p>
<h4 id="serverautorespondafter-ms"><code>server.autoRespondAfter = ms;</code></h4>
<p>Causes the server to automatically respond to incoming requests after a timeout.</p>
<h4 id="serverrespondimmediately-true"><code>server.respondImmediately = true;</code></h4>
<p>If set, the server will respond to every request immediately and synchronously.</p>
<p>This is ideal for faking the server from within a test without having to call <code>server.respond()</code> after each request made in that test.</p>
<p>As this is synchronous and immediate, this is not suitable for simulating actual network latency in tests or mockups. To simulate network latency with automatic responses, see <code>server.autoRespond</code> and <code>server.autoRespondAfter</code>.</p>
<h4 id="array-serverrequests">array <code>server.requests</code></h4>
<p>You can inspect the <code>server.requests</code> to verify request ordering, find unmatched requests or check that no requests has been done.
<code>server.requests</code> is an array of all the <code>FakeXMLHttpRequest</code> objects that have been created.</p>
<h4 id="boolean-serverfakehttpmethods"><code>Boolean server.fakeHTTPMethods</code></h4>
<p>If set to <code>true</code>, server will find <code>_method</code> parameter in POST body and recognize that as the actual method.</p>
<p>Supports a pattern common to Ruby on Rails applications. For custom HTTP method faking, override <code>server.getHTTPMethod(request)</code>.</p>
<h4 id="servergethttpmethodrequest"><code>server.getHTTPMethod(request)</code></h4>
<p>Used internally to determine the HTTP method used with the provided request.</p>
<p>By default this method simply returns <code>request.method</code>. When <code>server.fakeHTTPMethods</code> is true, the method will return the value of the <code>_method</code> parameter if the method is "POST".</p>
<p>This method can be overridden to provide custom behavior.</p>
<h4 id="serverrestore"><code>server.restore();</code></h4>
<p>Restores the native XHR constructor.</p>
<h3 id="fake-server-options">Fake server options</h3>
<p>These options are properties on the server object and can be set directly</p>
<pre><code class="language-js">server.autoRespond = true;
</code></pre>
<p>You can also pass options with an object literal to <code>fakeServer.create</code> and <code>.configure</code>.</p>
<h4 id="boolean-autorespond"><code>Boolean autoRespond</code></h4>
<p>If set, will automatically respond to every request after a timeout.</p>
<p>The default timeout is 10ms but you can control it through the <code>autoRespondAfter</code> property.</p>
<p>Note that this feature is intended to help during mockup development, and is not suitable for use in tests.</p>
<p>For synchronous immediate responses, use <code>respondImmediately</code> instead.</p>
<h4 id="number-autorespondafter-ms"><code>Number autoRespondAfter (ms)</code></h4>
<p>Causes the server to automatically respond to incoming requests after a timeout.</p>
<h4 id="boolean-respondimmediately"><code>Boolean respondImmediately</code></h4>
<p>If set, the server will respond to every request immediately and synchronously.</p>
<p>This is ideal for faking the server from within a test without having to call <code>server.respond()</code> after each request made in that test.</p>
<p>As this is synchronous and immediate, this is not suitable for simulating actual network latency in tests or mockups. To simulate network latency with automatic responses, see <code>server.autoRespond</code> and <code>server.autoRespondAfter</code>.</p>
<h4 id="boolean-fakehttpmethods"><code>boolean fakeHTTPMethods</code></h4>
<p>If set to <code>true</code>, server will find <code>_method</code> parameter in <code>POST</code> body and recognize that as the actual method.</p>
<p>Supports a pattern common to Ruby on Rails applications.</p>
<p>For custom HTTP method faking, override <code>server.getHTTPMethod(request)</code></p>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/sinonjs/nise/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
    
  </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme_extra.js" defer></script>
    <script src="js/theme.js" defer></script>
      <script src="search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>

<!--
MkDocs version : 1.2.3
Build Date UTC : 2022-12-19 13:33:16.041388+00:00
-->
